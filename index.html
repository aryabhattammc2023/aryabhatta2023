<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap">
    <link rel="shortcut icon" href="aryabhatta.jpg" type="image/x-icon">
    <title>Aryabhatta MMC 2023</title>
</head>
<body>
    <header>
        <div class="header-title">Aryabhatta Complaint Portal</div>
        <div class="header-image">
            <img src="aryabhatta.jpg" alt="Header Image">
        </div>
    </header>
    <div class="container">
        <h1></h1>
        <form id="complaintForm">
            <div class="form-group">
                <label for="name">Name <span class="required">*</span></label>
                <input type="text" id="name" name="name" required>
            </div>
            <div class="form-group">
                <label for="meal">Meal <span class="required">*</span></label>
                <select name="mealselect" id="mealselect" type="mealselect">
                    <option value="Breakfast">Breakfast</option>
                    <option value="Lunch">Lunch</option>
                    <option value="Snacks">Snacks</option>
                    <option value="Dinner">Dinner</option>
                </select>
                <input type="meal" id="meal" name="meal" hidden="true">
            </div>
            <div class="form-group">
                <label for="room">Room Number <span class="required">*</span></label>
                <input type="room" id="room" name="room" required>
            </div>
            <div class="form-group">
                <label for="date">Date</label>
                <input type="date" id="date" name="date" hidden="true">
            </div>
            <div class="form-group">
                <label for="complaint">Complaint <span class="required">*</span></label>
                <textarea id="complaint" name="complaint" rows="5" required></textarea>
            </div>
            <div class="form-group">
                <label for="image">Image <span class="required">(G-Drive link/-)</span></label>
                <input type="text" id="imageGD" name="imageGD" value="optional">
            </div>
            <button id="submitButton" type="submit">Submit</button>
        </form>
        <div id="message" class="hidden"></div>
    </div>
    <footer>
        &copy; 2023 Aryabhatta MMC
    </footer>
    <script src="script.js"></script>
      <script>
        const scriptURL = 'https://script.google.com/macros/s/AKfycbzvOSwTr5k0c3fcOjKlRbHj1DTC8Rr0iR9JIMzHHpABIK1ux-WIMsZy48T2dQ15FijKyg/exec'
        const form = document.getElementById('complaintForm');
        const dateBox = document.getElementById('date');
        const mealBox = document.getElementById('meal')

        var dropdownList = document.getElementById('mealselect');

        dropdownList.onchange = (ev) =>{
            mealBox.value = dropdownList.value;
        }

        form.addEventListener('submit', e => {
            const cmptext = document.getElementById('complaint');
            
            e.preventDefault()
            fetch(scriptURL, { method: 'POST', body: new FormData(form)})
                .then(response => console.log('Success!'))
                .catch(error => console.error('Error!', error.message))
        })
    </script>
</body>
</html>
